"use strict";(self.webpackChunkreact_developer_way_blogging=self.webpackChunkreact_developer_way_blogging||[]).push([[472],{5472:function(e,t,s){s.r(t);var n,r=s(1413),a=s(5861),c=s(885),i=s(168),l=s(7757),u=s.n(l),o=s(2791),d=s(1134),h=s(6031),p=s(102),f=s(9254),m=s(9501),g=s(5639),x=s(3117),v=s(4954),j=s(333),y=s.n(j),w=s(3585),Z=s(9062),b=s(5208),E=s(4961),N=s(1453),k=s(1665),I=s(577),D=s(1776),_=s(6871),C=s(7531),P=s(184),A=h.ZP.div(n||(n=(0,i.Z)([""])));t.default=function(){var e=(0,_.s0)(),t=(0,d.cI)({mode:"onChange",defaultValues:{title:"",slug:"",status:2,category:{},hot:!1,image:"",user:{}}}),s=t.control,n=t.watch,i=t.handleSubmit,l=t.setValue,h=t.getValues,j=t.reset,S=(0,D.Z)(l,h),L=S.progress,J=S.image,O=S.handleSelectImage,R=S.handleDeleteImage,F=S.handleResetUpload,T=(0,o.useState)([]),V=(0,c.Z)(T,2),Y=V[0],G=V[1],M=(0,o.useState)(""),U=(0,c.Z)(M,2),z=U[0],B=U[1],H=(0,o.useState)(!1),Q=(0,c.Z)(H,2),q=Q[0],K=Q[1],W=(0,k.a)().userInfo;(0,o.useEffect)((function(){function e(){return(e=(0,a.Z)(u().mark((function e(){var t,s,n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,Z.hJ)(N.F,"categories"),s=(0,Z.IO)(t,(0,Z.ar)("status","==",1)),e.next=4,(0,Z.PL)(s);case 4:n=e.sent,a=[],n.forEach((function(e){a.push((0,r.Z)({id:e.id},e.data()))})),G(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var X=n("status"),$=n("hot");(0,o.useEffect)((function(){function e(){return(e=(0,a.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W.email){e.next=2;break}return e.abrupt("return",null);case 2:return t=(0,Z.IO)((0,Z.hJ)(N.F,"users"),(0,Z.ar)("email","==",W.email)),e.next=5,(0,Z.PL)(t);case 5:e.sent.forEach((function(e){l("user",(0,r.Z)({id:e.id},e.data()))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[W.email]);var ee=function(){var t=(0,a.Z)(u().mark((function t(s){var n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,K(!0),(n=(0,r.Z)({},s)).slug=y()(s.slug||s.title,{lower:!0}),n.status=Number(s.status),a=(0,Z.hJ)(N.F,"posts"),t.next=8,(0,Z.ET)(a,(0,r.Z)((0,r.Z)({},n),{},{userId:n.user.id,categoryId:n.category.id,image:J,createdAt:(0,Z.Bt)()}));case 8:I.Am.success("Create new post successfully!!!"),j({title:"",slug:"",status:2,category:{},hot:!1,image:"",user:{}}),F(),B({}),e("/manage/post"),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),K(!1);case 18:return t.prev=18,K(!1),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[0,15,18,21]])})));return function(e){return t.apply(this,arguments)}}(),te=function(){var e=(0,a.Z)(u().mark((function e(t){var s,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,Z.JU)(N.F,"categories",t.id),e.next=3,(0,Z.QT)(s);case 3:n=e.sent,l("category",(0,r.Z)({id:n.id},n.data())),B(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){document.title="Developer way - Add new post "}),[]),(0,P.jsxs)(A,{children:[(0,P.jsx)("h1",{className:"dashboard-heading",children:"Add new post"}),(0,P.jsxs)("form",{onSubmit:i(ee),children:[(0,P.jsx)("div",{className:"grid mb-5 sm:grid-cols-1 lg:grid-cols-1 lg:gap-x-10 lg:mb-10",children:(0,P.jsxs)(g.g,{children:[(0,P.jsx)(v._,{children:"Image"}),(0,P.jsx)(b.Z,{onChange:O,className:" h-[400px]",progress:L,image:J,handleDeleteImage:R})]})}),(0,P.jsxs)("div",{className:"form-layout",children:[(0,P.jsxs)(g.g,{children:[(0,P.jsx)(v._,{children:"Title"}),(0,P.jsx)(x.I,{name:"title",control:s,placeholder:"Enter your title"})]}),(0,P.jsxs)(g.g,{children:[(0,P.jsx)(v._,{children:"Category"}),(0,P.jsxs)(m.L,{children:[(0,P.jsx)(m.L.Select,{placeholder:"".concat((null===z||void 0===z?void 0:z.name)||"Select at Categoris")}),(0,P.jsx)(m.L.List,{children:Y.length>0&&Y.map((function(e){return(0,P.jsx)(m.L.Option,{onClick:function(){return te(e)},children:e.name},e.id)}))})]})]})]}),(0,P.jsx)("div",{className:"w-full my-10",children:(0,P.jsxs)(g.g,{children:[(0,P.jsx)(v._,{children:"Description"}),(0,P.jsx)(C.Z,{name:"desc",control:s,placeholder:"Enter your description",className:"h-[100px]"})]})}),(0,P.jsxs)("div",{className:"form-layout",children:[(0,P.jsxs)(g.g,{children:[(0,P.jsx)(v._,{children:"Feature Hot"}),(0,P.jsx)(E.Z,{on:!0===$,onClick:function(){return l("hot",!$)}})]}),((null===W||void 0===W?void 0:W.role)===w.xZ.ADMIN||(null===W||void 0===W?void 0:W.role)===w.xZ.MOD)&&(0,P.jsxs)(g.g,{children:[(0,P.jsx)(v._,{children:"Status"}),(0,P.jsxs)("div",{className:"flex items-center gap-x-5",children:[(0,P.jsx)(f.Y,{name:"status",control:s,checked:Number(X)===w.cf.APPROVED,value:w.cf.APPROVED,children:"Approved"}),(0,P.jsx)(f.Y,{name:"status",control:s,checked:Number(X)===w.cf.PENDING,value:w.cf.PENDING,children:"Pending"}),(0,P.jsx)(f.Y,{name:"status",control:s,checked:Number(X)===w.cf.REJECTED,value:w.cf.REJECTED,children:"Reject"})]})]})]}),(0,P.jsx)(p.z,{type:"submit",className:"mx-auto w-[250px]",isLoading:q,disabled:q,children:"Add new post"})]})]})}}}]);
//# sourceMappingURL=472.c75aa273.chunk.js.map