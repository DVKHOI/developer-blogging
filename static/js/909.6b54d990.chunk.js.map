{"version":3,"file":"static/js/909.6b54d990.chunk.js","mappings":"oXAkBMA,EAAmBC,EAAAA,GAAAA,IAAH,sBAgGtB,EA9FmB,WACjB,OAA0BC,EAAAA,EAAAA,UAAS,IAAnC,eAAOC,EAAP,KAAcC,EAAd,KACA,GAA8BF,EAAAA,EAAAA,YAA9B,eAAOG,EAAP,KAAgBC,EAAhB,KACA,GAA0BJ,EAAAA,EAAAA,UAAS,GAAnC,eAAOK,EAAP,KAAcC,EAAd,KACMC,GAAaN,GACnBO,EAAAA,EAAAA,YAAU,WAAM,wCACd,mGACQC,GAASC,EAAAA,EAAAA,IAAWC,EAAAA,EAAU,SAC9BC,GAAUC,EAAAA,EAAAA,IACdJ,GACAK,EAAAA,EAAAA,IAAM,SAAU,KAAM,IACtBA,EAAAA,EAAAA,IAAM,MAAO,MAAM,IACnBC,EAAAA,EAAAA,IAbc,IAOlB,UAQkCC,EAAAA,EAAAA,IAAQJ,GAR1C,OAQQK,EARR,OASQC,EACJD,EAAkBE,KAAKF,EAAkBE,KAAKC,OAAS,GACzDhB,EAAWc,IACXG,EAAAA,EAAAA,IAAWT,GAAS,SAACU,GACnB,IAAMC,EAAU,GAChBD,EAASE,SAAQ,SAACC,GAChBF,EAAQG,MAAR,QACEC,GAAIF,EAAIE,IACLF,EAAIG,YAGX1B,EAASqB,MAELM,GAAIhB,EAAAA,EAAAA,IACRJ,GACAK,EAAAA,EAAAA,IAAM,SAAU,KAAM,IACtBA,EAAAA,EAAAA,IAAM,MAAO,MAAM,KAErBO,EAAAA,EAAAA,IAAWQ,GAAG,SAACP,GACbhB,EAASgB,EAASQ,SA5BtB,6CADc,uBAAC,WAAD,wBAgCdC,KACC,IACH,IAAMC,EAAkB,mCAAG,+FACnBC,GAAUpB,EAAAA,EAAAA,KACdH,EAAAA,EAAAA,IAAWC,EAAAA,EAAU,UACrBuB,EAAAA,EAAAA,IAAW/B,IACXY,EAAAA,EAAAA,IA5CgB,KA8ClBM,EAAAA,EAAAA,IAAWY,GAAS,SAACX,GACnB,IAAIa,EAAS,GACbb,EAASE,SAAQ,SAACC,GAChBU,EAAOT,MAAP,QACEC,GAAIF,EAAIE,IACLF,EAAIG,YAGX1B,EAAS,GAAD,eAAKD,GAAUkC,OAdA,UAgBOnB,EAAAA,EAAAA,IAAQiB,GAhBf,OAgBnBhB,EAhBmB,OAiBnBC,EACJD,EAAkBE,KAAKF,EAAkBE,KAAKC,OAAS,GACzDhB,EAAWc,GAnBc,2CAAH,qDAqBxB,OACE,SAACpB,EAAD,CAAkBsC,UAAU,aAA5B,UACE,iBAAKA,UAAU,YAAf,WACE,SAACC,EAAA,EAAD,kCAEE9B,IACA,gBAAK6B,UAAU,MAAf,SACGnC,EAAMmB,OAAS,GACdnB,EAAMqC,KAAI,SAACC,GAAD,OACR,gBAEEH,UAAU,yCAFZ,UAIE,SAACI,EAAA,EAAD,CAEEJ,UAAU,GACVR,KAAMW,GAFDA,EAAKZ,KAJPY,EAAKZ,SAYnBtB,EAAQJ,EAAMmB,SACb,gBAAKgB,UAAU,QAAf,UACE,SAAC,IAAD,CAAQK,QAAST,EAAoBI,UAAU,UAA/C,+BCjGNM,EAAiB3C,EAAAA,GAAAA,IAAH,sBAapB,EAZiB,WACf,OACE,SAAC2C,EAAD,WACE,UAACC,EAAA,EAAD,YACE,SAACC,EAAA,EAAD,KACA,SAACC,EAAA,EAAD,KACA,SAAC,EAAD","sources":["module/home/HomeNewest.js","pages/HomePage.js"],"sourcesContent":["import {\n  collection,\n  getDocs,\n  limit,\n  onSnapshot,\n  query,\n  startAfter,\n  where,\n} from \"firebase/firestore\";\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Button } from \"../../components/button\";\nimport Heading from \"../../components/layout/Heading\";\nimport { database } from \"../../firebase/firebase-config\";\nimport PostNewestLarge from \"../post/PostNewestLarge\";\n\nconst HomeNewestStyles = styled.div``;\nconst POST_PER_PAGE = 6;\nconst HomeNewest = () => {\n  const [posts, setPosts] = useState([]);\n  const [lastDoc, setLastDoc] = useState();\n  const [total, setTotal] = useState(0);\n  const isLoading = !posts;\n  useEffect(() => {\n    async function fetchData() {\n      const colRef = collection(database, \"posts\");\n      const queries = query(\n        colRef,\n        where(\"status\", \"==\", 1),\n        where(\"hot\", \"==\", false),\n        limit(POST_PER_PAGE)\n      );\n      const documentSnapshots = await getDocs(queries);\n      const lastVisible =\n        documentSnapshots.docs[documentSnapshots.docs.length - 1];\n      setLastDoc(lastVisible);\n      onSnapshot(queries, (snapshot) => {\n        const results = [];\n        snapshot.forEach((doc) => {\n          results.push({\n            id: doc.id,\n            ...doc.data(),\n          });\n        });\n        setPosts(results);\n      });\n      const q = query(\n        colRef,\n        where(\"status\", \"==\", 1),\n        where(\"hot\", \"==\", false)\n      );\n      onSnapshot(q, (snapshot) => {\n        setTotal(snapshot.size);\n      });\n    }\n    fetchData();\n  }, []);\n  const handleLoadmorePost = async () => {\n    const nextRef = query(\n      collection(database, \"posts\"),\n      startAfter(lastDoc),\n      limit(POST_PER_PAGE)\n    );\n    onSnapshot(nextRef, (snapshot) => {\n      let result = [];\n      snapshot.forEach((doc) => {\n        result.push({\n          id: doc.id,\n          ...doc.data(),\n        });\n      });\n      setPosts([...posts, ...result]);\n    });\n    const documentSnapshots = await getDocs(nextRef);\n    const lastVisible =\n      documentSnapshots.docs[documentSnapshots.docs.length - 1];\n    setLastDoc(lastVisible);\n  };\n  return (\n    <HomeNewestStyles className=\"home-block\">\n      <div className=\"container\">\n        <Heading>Mới nhất</Heading>\n\n        {!isLoading && (\n          <div className=\"row\">\n            {posts.length > 0 &&\n              posts.map((post) => (\n                <div\n                  key={post.id}\n                  className=\"gap-3 mb-5 col-lg-4 col-md-6 col-sm-12\"\n                >\n                  <PostNewestLarge\n                    key={post.id}\n                    className=\"\"\n                    data={post}\n                  ></PostNewestLarge>\n                </div>\n              ))}\n          </div>\n        )}\n        {total > posts.length && (\n          <div className=\"mt-10\">\n            <Button onClick={handleLoadmorePost} className=\"mx-auto\">\n              Load more\n            </Button>\n          </div>\n        )}\n      </div>\n    </HomeNewestStyles>\n  );\n};\n\nexport default HomeNewest;\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Layout from \"../components/layout/Layout\";\r\nimport HomeBanner from \"../module/home/HomeBanner\";\r\nimport HomeFeature from \"../module/home/HomeFeature\";\r\nimport HomeNewest from \"../module/home/HomeNewest\";\r\n\r\nconst HomePageStyles = styled.div``;\r\nconst HomePage = () => {\r\n  return (\r\n    <HomePageStyles>\r\n      <Layout>\r\n        <HomeBanner></HomeBanner>\r\n        <HomeFeature></HomeFeature>\r\n        <HomeNewest></HomeNewest>\r\n      </Layout>\r\n    </HomePageStyles>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"names":["HomeNewestStyles","styled","useState","posts","setPosts","lastDoc","setLastDoc","total","setTotal","isLoading","useEffect","colRef","collection","database","queries","query","where","limit","getDocs","documentSnapshots","lastVisible","docs","length","onSnapshot","snapshot","results","forEach","doc","push","id","data","q","size","fetchData","handleLoadmorePost","nextRef","startAfter","result","className","Heading","map","post","PostNewestLarge","onClick","HomePageStyles","Layout","HomeBanner","HomeFeature"],"sourceRoot":""}